<%- include('layout', { body: ` 
<!-- Header -->
<section class="bg-gradient-to-br from-orange-500 to-yellow-500 text-white py-12">
    <div class="max-w-4xl mx-auto px-4 text-center">
        <h1 class="text-3xl md:text-4xl font-bold mb-4">Submitted Reviews</h1>
        <p class="text-lg opacity-90">
            See all Bitcoin payment experiences shared by the community
        </p>
    </div>
</section>

<!-- Stats Summary -->
<section class="py-8">
    <div class="max-w-6xl mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow-sm p-6 text-center">
                <div class="text-3xl font-bold text-gray-800">${typeof reviews !== 'undefined' ? reviews.length : 0}</div>
                <div class="text-gray-500 mt-1">Total Reviews</div>
            </div>
            <div class="bg-white rounded-lg shadow-sm p-6 text-center">
                <div class="text-3xl font-bold text-green-600">${typeof reviews !== 'undefined' ? reviews.filter(r => r.is_valid === 1).length : 0}</div>
                <div class="text-gray-500 mt-1">‚úÖ Successful Bitcoin Use</div>
            </div>
            <div class="bg-white rounded-lg shadow-sm p-6 text-center">
                <div class="text-3xl font-bold text-red-500">${typeof reviews !== 'undefined' ? reviews.filter(r => r.is_valid === 0 && r.validation_reason).length : 0}</div>
                <div class="text-gray-500 mt-1">‚ùå Unsuccessful Attempt</div>
            </div>
        </div>
    </div>
</section>

<!-- Reviews List -->
<section class="pb-12">
    <div class="max-w-6xl mx-auto px-4">
        ${typeof error !== 'undefined' && error ? '<div class="bg-red-100 text-red-700 p-4 rounded-lg mb-8">' + error + '</div>' : ''}
        
        ${typeof reviews !== 'undefined' && reviews.length > 0 ? '<div class="space-y-4">' + reviews.map(function(r) {
            var statusClass, statusIcon, statusLabel;
            if (r.is_valid === 1) {
                statusClass = 'bg-green-100 border-green-300 text-green-800';
                statusIcon = '‚úÖ';
                statusLabel = 'Successful Bitcoin Use';
            } else if (r.validation_reason) {
                statusClass = 'bg-red-100 border-red-300 text-red-800';
                statusIcon = '‚ùå';
                statusLabel = 'Unsuccessful Attempt';
            } else {
                statusClass = 'bg-yellow-100 border-yellow-300 text-yellow-800';
                statusIcon = '‚è≥';
                statusLabel = 'Pending Review';
            }
            
            var dateStr = r.submitted_at ? new Date(r.submitted_at + 'Z').toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) : 'Unknown';
            
            return '<div class="bg-white rounded-lg shadow-sm border hover:shadow-md transition">' +
                '<div class="p-6">' +
                    '<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4">' +
                        '<div class="flex items-center gap-3">' +
                            '<span class="text-2xl">' + statusIcon + '</span>' +
                            '<div>' +
                                (r.merchant_name ? '<h3 class="font-bold text-lg">' + r.merchant_name + '</h3>' : '<h3 class="font-bold text-lg text-gray-400">Unknown Merchant</h3>') +
                                '<p class="text-sm text-gray-500">Submitted ' + dateStr + '</p>' +
                            '</div>' +
                        '</div>' +
                        '<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ' + statusClass + '">' +
                            statusLabel +
                        '</span>' +
                    '</div>' +
                    (r.review_text ? '<p class="text-gray-700 mb-4">' + r.review_text.substring(0, 300) + (r.review_text.length > 300 ? '...' : '') + '</p>' : '') +
                    (r.validation_reason ? '<div class="text-sm text-gray-500 mb-4 italic">' +
                        '<span class="font-medium">AI Assessment:</span> ' + r.validation_reason +
                    '</div>' : '') +
                    '<div class="flex items-center gap-4">' +
                        '<a href="' + r.review_link + '" target="_blank" class="text-bitcoin hover:underline text-sm font-medium">View Original Review ‚Üí</a>' +
                    '</div>' +
                '</div>' +
            '</div>';
        }).join('') + '</div>'
        : '<div class="text-center py-12">' +
            '<div class="text-6xl mb-4">üìù</div>' +
            '<h2 class="text-2xl font-bold mb-4">No Reviews Yet</h2>' +
            '<p class="text-gray-600 mb-8">' +
                'Be the first to submit a Bitcoin payment review!' +
            '</p>' +
            '<a href="/submit" class="inline-block bg-bitcoin text-white px-8 py-3 rounded-lg font-bold hover:bg-bitcoin-dark transition">' +
                'Submit a Review' +
            '</a>' +
        '</div>'
        }
    </div>
</section>

<!-- CTA -->
<section class="py-12 bg-gray-50">
    <div class="max-w-4xl mx-auto px-4 text-center">
        <h2 class="text-2xl font-bold mb-4">Paid with Bitcoin?</h2>
        <p class="text-gray-600 mb-6">
            Share your experience! Write a Google review mentioning your Bitcoin payment and enter our raffle.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/submit" class="bg-bitcoin text-white px-8 py-3 rounded-lg font-bold hover:bg-bitcoin-dark transition">
                Submit a Review
            </a>
            <a href="/merchants" class="border-2 border-bitcoin text-bitcoin px-8 py-3 rounded-lg font-bold hover:bg-bitcoin hover:text-white transition">
                Find Merchants
            </a>
        </div>
    </div>
</section>
` }) %>
